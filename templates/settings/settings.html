{% extends "shared/bootstrap_base.html" %}

{% block TITLE %}Settings{% endblock %}
{% block form_title %}Settings{% endblock %}

{% block form_content %}
<div class="text-dark">
  <form method="POST" action="{{ url_for('settings.update_reminder_settings') }}">
    <div class="form-check mb-3">
      <input type="checkbox" class="form-check-input" id="reminder_enabled" name="reminder_enabled" {% if current_user.reminder_enabled %}checked{% endif %}>
      <label class="form-check-label" for="reminder_enabled">Enable Telegram reminders</label>
    </div>

    <div id="reminder-day-wrapper" class="mb-3" style="display: {% if current_user.reminder_enabled %}block{% else %}none{% endif %};">
      <label for="reminder_day" class="form-label">Preferred reminder day of the month (1â€“31):</label>
      <input type="number" id="reminder_day" name="reminder_day" min="1" max="31" class="form-control" value="{{ current_user.reminder_day or '' }}">
    </div>

    <div class="d-flex justify-content-end gap-2">
      <button type="submit" class="btn btn-dark rounded-3">Save Reminder Settings</button>
    </div>
  </form>

  {% if settings_saved and current_user.reminder_enabled %}
    <ul class="mt-3">
      <li>
        <a href="{{ url_for('settings.connect_telegram') }}">ðŸ”— Connect Telegram</a>
      </li>
    </ul>
  {% endif %}

  <ul class="mt-3">
    <li>Update profile (Coming soon)</li>
  </ul>
</div>

<script>
  const checkbox = document.getElementById("reminder_enabled");
  const reminderDay = document.getElementById("reminder-day-wrapper");

  checkbox.addEventListener("change", function () {
    reminderDay.style.display = this.checked ? "block" : "none";
  });
</script>
{% endblock %}