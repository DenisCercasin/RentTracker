{% extends "base.html" %}

{% block content %}
<h2>Settings</h2>

<form method="POST" action="{{ url_for('settings.update_reminder_settings') }}">
  <div class="form-group">
    <input type="checkbox" id="reminder_enabled" name="reminder_enabled" {% if current_user.reminder_enabled %}checked{% endif %}>
    <label for="reminder_enabled">Enable Telegram reminders</label>
  </div>

  <div id="reminder-day-wrapper" class="form-group" style="display: {% if current_user.reminder_enabled %}block{% else %}none{% endif %};">
    <label for="reminder_day">Preferred reminder day of the month (1â€“31):</label>
    <input type="number" id="reminder_day" name="reminder_day" min="1" max="31" class="form-control" value="{{ current_user.reminder_day or '' }}">
  </div>

  <button type="submit" class="btn btn-primary">Save Reminder Settings</button>
</form>

<ul>
{% if settings_saved and current_user.reminder_enabled %}
    <li>
      <a href="{{ url_for('settings.connect_telegram') }}">ðŸ”— Connect Telegram</a>
    </li>
  </ul>
{% endif %}

  <li>Update profile (Coming soon)</li>
</ul>

<script>
  const checkbox = document.getElementById("reminder_enabled");
  const reminderDay = document.getElementById("reminder-day-wrapper");

  checkbox.addEventListener("change", function () {
    reminderDay.style.display = this.checked ? "block" : "none";
  });
</script>
{% endblock %}
