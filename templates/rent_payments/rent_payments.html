{% extends "shared/base.html" %}

{% block TITLE %}All Rent Payments{% endblock %}

{% block content %}
<h2>ğŸ“„ All Rent Payments</h2>

<table border="1" cellpadding="8" cellspacing="0">
  <thead>
    <tr>
      <th>Apartment</th>
      <th>Tenant</th>
      <th>Month</th>
      <th>Amount</th>
      <th>Payment Date</th>
      <th>Icons</th>
    </tr>
  </thead>
  <tbody>
    {% for payment in rent_payments %}
      <tr>
        <td>{{ payment.apartment_name }}</td>
        <td>{{ payment.tenant_name }}</td>
        <td>{{ payment.month_display }}</td>
        <td>{{ ('%.2f'|format(payment.rent_amount)).replace('.00', '')}} â‚¬</td>
        <td>{{ payment.payment_date }}</td>
        <td><a href="{{url_for("rent_payments.edit_rent_payment",id=payment.id)}}">âœï¸ Edit</a></td>
        <td><a href="{{url_for("rent_payments.delete_rent_payment",id=payment.id)}}">ğŸ—‘ï¸ Delete</a></td>
    </tr>
  {% endfor %}
</table>


<form method ="post">
<button>New + </button>
</form>

<form name = "filter" method="get" action="{{ url_for('rent_payments.list_rent_payments') }}">
  <label>Apartment:</label>
  <select name="apartment_id">
    <option value="">-- All --</option>
    {% for a in apartments %}
      <option value="{{ a.id }}" {% if selected_apartment == a.id|string %}selected{% endif %}>{{ a.name }}</option>
    {% endfor %}
  </select>

  <label>Tenant:</label>
  <select name="tenant_id">
    <option value="">-- All --</option>
    {% for t in tenants %}
      <option value="{{ t.id }}" {% if selected_tenant == t.id|string %}selected{% endif %}>{{ t.name }}</option>
    {% endfor %}
  </select>

  <label>Month:</label>
  <input type="month" name="month" value="{{ selected_month or '' }}">

  <button type="submit">ğŸ” Filter</button>
  <a href="{{ url_for('rent_payments.list_rent_payments') }}">Reset</a>
</form>

{% endblock %}